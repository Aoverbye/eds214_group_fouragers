---
title: "plot_prompt2_g4"
format: html
editor: visual
editor_options: 
  chunk_output_type: console
---

```{r}
# load packages 
library(tidyverse)
library(janitor)
library(lubridate)
library(here)
```

```{r}
# read in data

bisley_q1_raw <- read_csv(file.path("/courses/EDS214/group_project/2024/fouragers/data", "QuebradaCuenca1-Bisley.csv"))

bisley_q2_raw <- read_csv(file.path("/courses/EDS214/group_project/2024/fouragers/data", "QuebradaCuenca2-Bisley.csv"))

bisley_q3_raw <- read_csv(file.path("/courses/EDS214/group_project/2024/fouragers/data", "QuebradaCuenca3-Bisley.csv"))

prm_raw <- read_csv(file.path("/courses/EDS214/group_project/2024/fouragers/data", "RioMameyesPuenteRoto.csv"))
```

```{r}
# cleaning data
bisley_q1_clean <- bisley_q1_raw %>% 
  clean_names() %>% 
  mutate(year = lubridate::year(sample_date)) %>% 
  filter(year %in% (1988:1990)) %>%
  select(sample_date, sample_id, year, na) # change variables to account for sodium

bisley_q2_clean <- bisley_q2_raw %>% 
  clean_names() %>% 
  mutate(year = lubridate::year(sample_date)) %>% 
filter(year %in% (1988:1990)) %>%
  select(sample_date, sample_id, year, na)

bisley_q3_clean <- bisley_q3_raw %>% 
  clean_names() %>% 
  mutate(year = lubridate::year(sample_date)) %>% 
  filter(year %in% (1988:1990)) %>%
  select(sample_date, sample_id, year, na)

prm_clean <- prm_raw %>% 
  clean_names() %>% 
  mutate(year = lubridate::year(sample_date)) %>% 
  filter(year %in% (1988:1990)) %>%
  select(sample_date, sample_id, year, na)

```

```{r}
# doing a join of all 4 data sets 
stream_chem <- bisley_q1_clean %>% 
  full_join(bisley_q2_clean) %>% 
  full_join(bisley_q3_clean) %>% 
  full_join(prm_clean)
```

```{r}

ggplot(data = stream_chem, aes(x = sample_date, y = na, color = sample_id)) +
  geom_line()+
  geom_vline(xintercept = as.numeric(stream_chem$sample_date[119]), linetype = "dashed", color = "black")+
  labs(x = "Sample Date (YYYY-MM)", y = "Sodium (mg/L)", title = "Sodium Amounts Related to Date and Collection Site Altitude")+
   scale_y_continuous(breaks = seq(0,15, by = 3))+
  scale_x_date(limits = c(as.Date("1988-01-01"), as.Date("1990-12-31")),
                     expand = c(0,0))+
  annotate("text", x = c(as.Date("1990-05-01")), y = 14, label = "Hurricane Hugo", color = "black")
  
  
  #legend(name = "Altitude", labels = c("140","218","218","198"))


# fix legend
```

